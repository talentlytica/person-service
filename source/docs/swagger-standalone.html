<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Person Service API Documentation</title>
  <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.10.5/swagger-ui.css">
  <style>
    html {
      box-sizing: border-box;
      overflow: -moz-scrollbars-vertical;
      overflow-y: scroll;
    }
    *, *:before, *:after {
      box-sizing: inherit;
    }
    body {
      margin: 0;
      padding: 0;
    }
    .topbar {
      display: none;
    }
  </style>
</head>
<body>
  <div id="swagger-ui"></div>
  <script src="https://unpkg.com/swagger-ui-dist@5.10.5/swagger-ui-bundle.js"></script>
  <script src="https://unpkg.com/swagger-ui-dist@5.10.5/swagger-ui-standalone-preset.js"></script>
  <script>
    // Embedded OpenAPI specification
    const spec = {
      "openapi": "3.0.3",
      "info": {
        "title": "Person Service API",
        "description": "RESTful API for managing persons and their attributes.\nThis service provides CRUD operations for person entities with support for dynamic attributes.\n",
        "version": "1.0.0",
        "contact": {
          "name": "API Support",
          "email": "support@example.com"
        }
      },
      "servers": [
        {
          "url": "http://localhost:8080/api/v1",
          "description": "Development server"
        },
        {
          "url": "https://api.example.com/v1",
          "description": "Production server"
        }
      ],
      "tags": [
        {
          "name": "persons",
          "description": "Person management operations"
        },
        {
          "name": "attributes",
          "description": "Person attribute management operations"
        },
        {
          "name": "health",
          "description": "Health check endpoints"
        }
      ],
      "paths": {
        "/health": {
          "get": {
            "tags": ["health"],
            "summary": "Health check endpoint",
            "description": "Returns the health status of the service",
            "operationId": "getHealth",
            "responses": {
              "200": {
                "description": "Service is healthy",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/HealthResponse"
                    }
                  }
                }
              }
            }
          }
        },
        "/persons": {
          "post": {
            "tags": ["persons"],
            "summary": "Create a new person",
            "description": "Creates a new person entity with the provided information",
            "operationId": "createPerson",
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/CreatePersonRequest"
                  }
                }
              }
            },
            "responses": {
              "201": {
                "description": "Person created successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/PersonResponse"
                    }
                  }
                }
              },
              "400": {
                "description": "Invalid request",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "500": {
                "description": "Internal server error",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              }
            }
          }
        },
        "/persons/{id}": {
          "get": {
            "tags": ["persons"],
            "summary": "Get person by ID",
            "description": "Retrieves a person entity by their unique identifier",
            "operationId": "getPersonById",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "description": "Unique identifier of the person",
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              },
              {
                "name": "X-Trace-Id",
                "in": "header",
                "description": "Trace ID for request tracking",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                }
              }
            ],
            "responses": {
              "200": {
                "description": "Person found",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/PersonResponse"
                    }
                  }
                }
              },
              "404": {
                "description": "Person not found",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "500": {
                "description": "Internal server error",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              }
            }
          },
          "put": {
            "tags": ["persons"],
            "summary": "Update person",
            "description": "Updates an existing person entity",
            "operationId": "updatePerson",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "description": "Unique identifier of the person",
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              }
            ],
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/UpdatePersonRequest"
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "Person updated successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/PersonResponse"
                    }
                  }
                }
              },
              "400": {
                "description": "Invalid request",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "404": {
                "description": "Person not found",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "500": {
                "description": "Internal server error",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              }
            }
          },
          "delete": {
            "tags": ["persons"],
            "summary": "Delete person",
            "description": "Deletes a person entity and all associated attributes",
            "operationId": "deletePerson",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "description": "Unique identifier of the person",
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              }
            ],
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/DeletePersonRequest"
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "Person deleted successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/SuccessResponse"
                    }
                  }
                }
              },
              "404": {
                "description": "Person not found",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "500": {
                "description": "Internal server error",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              }
            }
          }
        },
        "/persons/{id}/attributes": {
          "get": {
            "tags": ["attributes"],
            "summary": "Get all attributes for a person",
            "description": "Retrieves all attributes associated with a person",
            "operationId": "getPersonAttributes",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "description": "Unique identifier of the person",
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              }
            ],
            "responses": {
              "200": {
                "description": "Attributes retrieved successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/AttributesResponse"
                    }
                  }
                }
              },
              "404": {
                "description": "Person not found",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "500": {
                "description": "Internal server error",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              }
            }
          },
          "post": {
            "tags": ["attributes"],
            "summary": "Add attribute to person",
            "description": "Adds a new attribute to a person entity",
            "operationId": "addPersonAttribute",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "description": "Unique identifier of the person",
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              }
            ],
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/AddAttributeRequest"
                  }
                }
              }
            },
            "responses": {
              "201": {
                "description": "Attribute added successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/AttributeResponse"
                    }
                  }
                }
              },
              "400": {
                "description": "Invalid request",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "404": {
                "description": "Person not found",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "500": {
                "description": "Internal server error",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              }
            }
          }
        },
        "/persons/{id}/attributes/{attributeId}": {
          "put": {
            "tags": ["attributes"],
            "summary": "Update person attribute",
            "description": "Updates an existing attribute of a person",
            "operationId": "updatePersonAttribute",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "description": "Unique identifier of the person",
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              },
              {
                "name": "attributeId",
                "in": "path",
                "required": true,
                "description": "Unique identifier of the attribute",
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              }
            ],
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/UpdateAttributeRequest"
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "Attribute updated successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/AttributeResponse"
                    }
                  }
                }
              },
              "400": {
                "description": "Invalid request",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "404": {
                "description": "Attribute not found",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "500": {
                "description": "Internal server error",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              }
            }
          },
          "delete": {
            "tags": ["attributes"],
            "summary": "Delete person attribute",
            "description": "Deletes a specific attribute from a person",
            "operationId": "deletePersonAttribute",
            "parameters": [
              {
                "name": "id",
                "in": "path",
                "required": true,
                "description": "Unique identifier of the person",
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              },
              {
                "name": "attributeId",
                "in": "path",
                "required": true,
                "description": "Unique identifier of the attribute",
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              }
            ],
            "requestBody": {
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/DeleteAttributeRequest"
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "Attribute deleted successfully",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/SuccessResponse"
                    }
                  }
                }
              },
              "404": {
                "description": "Attribute not found",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              },
              "500": {
                "description": "Internal server error",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/ErrorResponse"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "components": {
        "schemas": {
          "Meta": {
            "type": "object",
            "required": ["traceId"],
            "properties": {
              "caller": {
                "type": "string",
                "description": "Identifier of the caller",
                "example": "user123"
              },
              "reason": {
                "type": "string",
                "description": "Reason for the request",
                "example": "create new user"
              },
              "traceId": {
                "type": "string",
                "format": "uuid",
                "description": "Unique trace ID for request tracking",
                "example": "550e8400-e29b-41d4-a716-446655440000"
              }
            }
          },
          "Person": {
            "type": "object",
            "required": ["name", "clientId"],
            "properties": {
              "id": {
                "type": "integer",
                "format": "int64",
                "description": "Unique identifier of the person",
                "readOnly": true,
                "example": 1
              },
              "name": {
                "type": "string",
                "description": "Full name of the person",
                "example": "John Doe"
              },
              "clientId": {
                "type": "string",
                "description": "Client identifier",
                "example": "1234567890"
              },
              "createdAt": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp when the person was created",
                "readOnly": true,
                "example": "2024-03-20T10:00:00Z"
              },
              "updatedAt": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp when the person was last updated",
                "readOnly": true,
                "example": "2024-03-20T10:00:00Z"
              },
              "attributes": {
                "type": "array",
                "description": "List of attributes associated with the person",
                "items": {
                  "$ref": "#/components/schemas/Attribute"
                }
              }
            }
          },
          "Attribute": {
            "type": "object",
            "required": ["key", "value"],
            "properties": {
              "id": {
                "type": "integer",
                "format": "int64",
                "description": "Unique identifier of the attribute",
                "readOnly": true,
                "example": 1
              },
              "key": {
                "type": "string",
                "description": "Attribute key/name",
                "example": "email"
              },
              "value": {
                "type": "string",
                "description": "Attribute value",
                "example": "john.doe@example.com"
              },
              "createdAt": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp when the attribute was created",
                "readOnly": true,
                "example": "2024-03-20T10:00:00Z"
              },
              "updatedAt": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp when the attribute was last updated",
                "readOnly": true,
                "example": "2024-03-20T10:00:00Z"
              }
            }
          },
          "Error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string",
                "description": "Error code",
                "example": "VALIDATION_ERROR"
              },
              "message": {
                "type": "string",
                "description": "Human-readable error message",
                "example": "Invalid input parameters"
              },
              "details": {
                "type": "array",
                "description": "Additional error details",
                "items": {
                  "type": "string"
                },
                "example": ["name is required", "clientId must be numeric"]
              }
            }
          },
          "CreatePersonRequest": {
            "type": "object",
            "required": ["meta", "person"],
            "properties": {
              "meta": {
                "$ref": "#/components/schemas/Meta"
              },
              "person": {
                "type": "object",
                "required": ["name", "clientId"],
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "John Doe"
                  },
                  "clientId": {
                    "type": "string",
                    "example": "1234567890"
                  }
                }
              }
            }
          },
          "UpdatePersonRequest": {
            "type": "object",
            "required": ["meta", "person"],
            "properties": {
              "meta": {
                "$ref": "#/components/schemas/Meta"
              },
              "person": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "John Doe Updated"
                  },
                  "clientId": {
                    "type": "string",
                    "example": "1234567890"
                  }
                }
              }
            }
          },
          "DeletePersonRequest": {
            "type": "object",
            "required": ["meta"],
            "properties": {
              "meta": {
                "$ref": "#/components/schemas/Meta"
              }
            }
          },
          "AddAttributeRequest": {
            "type": "object",
            "required": ["meta", "attribute"],
            "properties": {
              "meta": {
                "$ref": "#/components/schemas/Meta"
              },
              "attribute": {
                "type": "object",
                "required": ["key", "value"],
                "properties": {
                  "key": {
                    "type": "string",
                    "example": "email"
                  },
                  "value": {
                    "type": "string",
                    "example": "john.doe@example.com"
                  }
                }
              }
            }
          },
          "UpdateAttributeRequest": {
            "type": "object",
            "required": ["meta", "attribute"],
            "properties": {
              "meta": {
                "$ref": "#/components/schemas/Meta"
              },
              "attribute": {
                "type": "object",
                "properties": {
                  "key": {
                    "type": "string",
                    "example": "email"
                  },
                  "value": {
                    "type": "string",
                    "example": "john.updated@example.com"
                  }
                }
              }
            }
          },
          "DeleteAttributeRequest": {
            "type": "object",
            "required": ["meta"],
            "properties": {
              "meta": {
                "$ref": "#/components/schemas/Meta"
              }
            }
          },
          "PersonResponse": {
            "type": "object",
            "properties": {
              "meta": {
                "type": "object",
                "properties": {
                  "traceId": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  }
                }
              },
              "person": {
                "$ref": "#/components/schemas/Person"
              },
              "error": {
                "$ref": "#/components/schemas/Error"
              }
            }
          },
          "AttributeResponse": {
            "type": "object",
            "properties": {
              "meta": {
                "type": "object",
                "properties": {
                  "traceId": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  }
                }
              },
              "attribute": {
                "$ref": "#/components/schemas/Attribute"
              },
              "error": {
                "$ref": "#/components/schemas/Error"
              }
            }
          },
          "AttributesResponse": {
            "type": "object",
            "properties": {
              "meta": {
                "type": "object",
                "properties": {
                  "traceId": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  }
                }
              },
              "attributes": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Attribute"
                }
              },
              "error": {
                "$ref": "#/components/schemas/Error"
              }
            }
          },
          "SuccessResponse": {
            "type": "object",
            "properties": {
              "meta": {
                "type": "object",
                "properties": {
                  "traceId": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  }
                }
              },
              "success": {
                "type": "boolean",
                "example": true
              },
              "message": {
                "type": "string",
                "example": "Operation completed successfully"
              },
              "error": {
                "$ref": "#/components/schemas/Error"
              }
            }
          },
          "ErrorResponse": {
            "type": "object",
            "properties": {
              "meta": {
                "type": "object",
                "properties": {
                  "traceId": {
                    "type": "string",
                    "format": "uuid",
                    "example": "550e8400-e29b-41d4-a716-446655440000"
                  }
                }
              },
              "error": {
                "$ref": "#/components/schemas/Error"
              }
            }
          },
          "HealthResponse": {
            "type": "object",
            "properties": {
              "status": {
                "type": "string",
                "enum": ["healthy", "unhealthy"],
                "example": "healthy"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time",
                "example": "2024-03-20T10:00:00Z"
              },
              "version": {
                "type": "string",
                "example": "1.0.0"
              }
            }
          }
        }
      }
    };

    window.onload = function() {
      window.ui = SwaggerUIBundle({
        spec: spec,
        dom_id: '#swagger-ui',
        deepLinking: true,
        presets: [
          SwaggerUIBundle.presets.apis,
          SwaggerUIStandalonePreset
        ],
        plugins: [
          SwaggerUIBundle.plugins.DownloadUrl
        ],
        layout: "StandaloneLayout",
        tryItOutEnabled: true,
        displayRequestDuration: true,
        filter: true,
        syntaxHighlight: {
          activate: true,
          theme: "monokai"
        }
      });
    };
  </script>
</body>
</html>

